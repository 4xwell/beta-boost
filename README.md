# Î²-boost
### _Special Relativity Simulator in Unity_

## Description
This project aims to allow anyone to experience the effects of special relativity, well
below the extreme velocities required in reality. By constructing a special relativity
simulation within the context of a computer game, the player of the game will get a
better intuition of some notable relativistic effects such as length contraction, Lorentz
boosts, coordinate transformations and more.

## Content
1. `PlayerController.cs` - Controls the playable character. Based on the following player controller from Unity: [Starter Assets - ThirdPerson](https://assetstore.unity.com/packages/essentials/starter-assets-thirdperson-updates-in-new-charactercontroller-pa-196526?srsltid=AfmBOorK0biqhhL-1w10QyQ8-k_B-XmCcJ50nZA-1Nb8Vv9RkoAjo4BW)
2. `LorentzTransform.cs` - Contructs the Lorentz transformation matrix from the player's velocity parameters.
3. `VertexManager.cs` - Applies a Lorentz boost to mesh vertices for relativistic effects.
4. `MinimapScript.cs` - Handles player control, physics, and camera.
5. `SpeedDisplay.cs` - Displays the player's speed, $\beta$-factor and Lorentz factor on the UI.


## Code hierarchy 
This overview was generated by Google's ð ðžð¦ð¢ð§ð¢-ðŸ.ðŸ“-ð©ð«ð¨-ð©ð«ðžð¯ð¢ðžð°-ðŸŽðŸ“-ðŸŽðŸ” model

```mermaid
sequenceDiagram
    participant PlayerInput as Unity Input System
    participant PlayerController
    participant LorentzTransform
    participant VertexManager
    participant SpeedDisplay
    participant MinimapScript
    participant CharacterController as Unity CharacterController
    participant CinemachineTarget as Cinemachine Target
    participant EnvMeshes as Environment Meshes
    participant UI_SpeedText as UI Speed Text
    participant UI_BetaText as UI Beta Text
    participant UI_GammaText as UI Gamma Text

    PlayerInput->>PlayerController: OnMove(InputValue)
    PlayerInput->>PlayerController: OnLook(InputValue)
    PlayerInput->>PlayerController: OnJump(InputValue)
    PlayerInput->>PlayerController: OnSprint(InputValue)

    loop Game Update Loop
        PlayerController->>PlayerController: ReadInput()
        PlayerController->>PlayerController: GroundCheck()
        PlayerController->>PlayerController: GravityAndJump()
        PlayerController->>CharacterController: Move(velocity * Time.deltaTime)
        PlayerController->>PlayerController: CameraRotation()
        PlayerController->>CinemachineTarget: Update Rotation

        PlayerController->>LorentzTransform: Access Beta, BetaVec, Gamma
        LorentzTransform->>LorentzTransform: Calculate Lambda (Lorentz Matrix)

        PlayerController->>SpeedDisplay: Access Beta, BetaVec, Gamma
        SpeedDisplay->>SpeedDisplay: Calculate physical speed
        SpeedDisplay->>UI_SpeedText: SetText(speed)
        SpeedDisplay->>UI_BetaText: SetText(beta)
        SpeedDisplay->>UI_GammaText: SetText(gamma)

        PlayerController->>MinimapScript: Access player.position, player.eulerAngles
        MinimapScript->>MinimapScript: Update own transform (position & rotation)

        PlayerController->>VertexManager: Access player.transform.position, BetaVec
        LorentzTransform->>VertexManager: Access Lambda (Lorentz Matrix)
        VertexManager->>VertexManager: For each mesh in envRoot
        VertexManager->>EnvMeshes: Calculate new vertex positions (boosted)
        VertexManager->>EnvMeshes: Update mesh vertices & RecalculateBounds
    end
```

```mermaid
sequenceDiagram
    %% ==== PARTICIPANTS ====
    actor   UInput              as Unity Input System
    participant PlayerCtrl      as PlayerController<br/>(Update)
    participant LorentzTrans    as LorentzTransform<br/>(Update)
    participant VertMgr         as VertexManager<br/>(Update)
    participant SpeedDisp       as SpeedDisplay<br/>(Update)
    participant Minimap         as MinimapScript<br/>(LateUpdate)
    participant CharCtrl        as Unity CharacterController
    participant CineTarget      as Cinemachine Target
    participant Meshes          as Environment Meshes
    participant UITexts         as UI Speed/Beta/Gamma

    %% ==== INPUT â†’ PLAYERCONTROLLER ====
    UInput  ->> PlayerCtrl: OnMove(in Value)
    UInput  ->> PlayerCtrl: OnLook(in Value)
    UInput  ->> PlayerCtrl: OnJump(in Value)
    UInput  ->> PlayerCtrl: OnSprint(in Value)

    %% ==== MAIN GAME LOOP ====
    loop Frame Update (60 Hz)
        %% ---- PHYSICS + MOVEMENT ----
        Note over PlayerCtrl: ï¸ŽUpdate()<br/>â€” internal methods â€”
        PlayerCtrl  ->> PlayerCtrl: ReadInput()  
        PlayerCtrl  ->> PlayerCtrl: GroundCheck()  
        PlayerCtrl  ->> PlayerCtrl: GravityAndJump()  
        PlayerCtrl  ->> CharCtrl  : Move(v Â· Î”t)
        PlayerCtrl  ->> PlayerCtrl: CameraRotation()
        PlayerCtrl  ->> CineTarget: Align camera boom

        %% ---- RELATIVISTIC STATE ----
        PlayerCtrl  ->> LorentzTrans: Î², Î²âƒ—, Î³
        activate LorentzTrans
        LorentzTrans ->> LorentzTrans: BuildÎ›(Î²âƒ—, Î³)
        deactivate LorentzTrans

        %% ---- SPEED / UI HUD ----
        PlayerCtrl  ->> SpeedDisp: Î², Î³, |v|
        SpeedDisp   ->> UITexts   : SetText(v, Î², Î³)

        %% ---- MINIMAP FOLLOW ----
        PlayerCtrl  ->> Minimap   : pos, rot
        Minimap     ->> Minimap   : SyncTransform()

        %% ---- GEOMETRY BOOST ----
        alt First Frame
            VertMgr ->> VertMgr: CacheRestVertices()
        else Every Frame
            PlayerCtrl    ->> VertMgr: p, Î²âƒ—
            LorentzTrans  ->> VertMgr: Î›
            VertMgr       ->> Meshes  : foreach mesh â†’ BoostVerts(Î›)
        end
    end
```
